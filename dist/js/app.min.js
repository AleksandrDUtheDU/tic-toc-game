(()=>{"use strict";var e,t;e=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",document.addEventListener("DOMContentLoaded",(function(){document.getElementById("burger").addEventListener("click",(function(){document.querySelector(".header").classList.toggle("open")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&document.querySelector(".header").classList.remove("open")})),document.getElementById("menu").addEventListener("click",(e=>{e._isClickWithInMenu=!0})),document.getElementById("burger").addEventListener("click",(e=>{e._isClickWithInMenu=!0})),document.body.addEventListener("click",(e=>{e._isClickWithInMenu||document.querySelector(".header").classList.remove("open")})),(()=>{const e=document.querySelector("#board"),t=document.querySelectorAll("[data-party]");let n=Array.from({length:9},((e,t)=>t+1)),o=Array.from({length:9},((e,t)=>t+1)),l=!1,a="circle",c="cross";for(let t=1;t<=9;t++){const n=document.createElement("div");n.classList.add("box"),n.dataset.num=t,e.append(n)}const r=document.querySelectorAll("[data-num]");t.forEach((e=>{e.addEventListener("click",(e=>{l||(t.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),a=e.target.dataset.party)}))})),r.forEach((e=>{e.addEventListener("click",(e=>{l=!0,"box"==e.target.classList.value?(e.target.classList.add(a),n[e.target.dataset.num-1]=a,(e=>{if(o=n.filter((e=>Number.isInteger(e))),o.length>0){"cross"==a&&(c="circle");const t=parseInt(e),l=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]],r=()=>{window.confirm("Хотите начать игру заново?")&&window.location.reload()},d=(e,t)=>t.filter((t=>e.includes(t))),s=e=>l.map((t=>t.filter((t=>n[t-1]==e)))).filter((e=>3==e.length)).flat(),i=e=>{const t=document.querySelector(`[data-num='${e}']`);n[e-1]=c,t.classList.add(c)},u=l.filter((e=>e.find((e=>e==t)))).map((e=>e.filter((e=>n[e-1]!==a&&n[e-1]!==c)))),m=e=>l.map((t=>t.filter((t=>n[t-1]!==e)))),g=e=>m(e).filter((e=>1==e.length)).flat(),f=d(o,g(a)),y=d(o,g(c)),A=u.filter((e=>e.find((e=>e%2!=0)))).flat();y.length>0?(i(y[0]),console.log("сработал крит AI")):f.length>0?(i(f[0]),console.log("сработал крит Play")):5==n[4]?(i(5),console.log("сработал 5")):A.length>0?(i(A[0]),console.log("сработал нечет")):o.length>0&&(i(o[0]),console.log("свободные")),3==s(a).length?setTimeout((function(){alert("Победил кожанный мешок!!"),r()}),1):3==s(c).length&&setTimeout((function(){alert("Победил скайнет!!"),r()}),1)}else 0==o.length&&setTimeout((function(){alert("НИЧЬЯ!!"),restartGame()}),1)})(e.target.dataset.num)):alert("ЗАНЯТО!!!")}))}))})()}))})();