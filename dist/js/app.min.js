(()=>{"use strict";var e,t;e=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",document.addEventListener("DOMContentLoaded",(function(){document.getElementById("burger").addEventListener("click",(function(){document.querySelector(".header").classList.toggle("open")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&document.querySelector(".header").classList.remove("open")})),document.getElementById("menu").addEventListener("click",(e=>{e._isClickWithInMenu=!0})),document.getElementById("burger").addEventListener("click",(e=>{e._isClickWithInMenu=!0})),document.body.addEventListener("click",(e=>{e._isClickWithInMenu||document.querySelector(".header").classList.remove("open")})),(()=>{const e=document.querySelector("#board"),t=document.querySelectorAll("[data-party]"),o=Array.from({length:9},((e,t)=>t+1));let n=[],c=!1,a="circle",r="cross";for(let t=1;t<=9;t++){const o=document.createElement("div");o.classList.add("box"),o.dataset.num=t,e.append(o)}const s=document.querySelectorAll("[data-num]");t.forEach((e=>{e.addEventListener("click",(e=>{c||(t.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),a=e.target.dataset.party)}))})),s.forEach((e=>{e.addEventListener("click",(e=>{c=!0,"box"==e.target.classList.value?(e.target.classList.add(a),o[e.target.dataset.num-1]=a,(e=>{"cross"==a&&(r="circle");const t=parseInt(e),c=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].filter((e=>e.find((e=>e==t)))),s=c.map((e=>e.filter((e=>o[e-1]!==a&&o[e-1]!==r)))),d=c.map((e=>e.filter((e=>o[e-1]!==a)))).filter((e=>1==e.length)).flat(),l=s.filter((e=>e.find((e=>5==e)))),i=s.filter((e=>e.find((e=>e%2!=0))));var u;if(console.log(d),console.log((u=n,d.filter((e=>u.includes(e))))),console.log(s),console.log(n),Array.isArray(d)&&d[0]){const e=d[0],t=document.querySelector(`[data-num='${e}']`);o[e-1]=r,t.classList.add(r),console.log("сработал крит")}else if(l&&5==o[4]){const e=document.querySelector("[data-num='5']");o[4]=r,e.classList.add(r),console.log("сработал 5")}else if(o[4]&&s){const e=document.querySelector(`[data-num='${i[0][0]}']`);o[i[0][0]-1]=r,e.classList.add(r),console.log("сработал нечет"),console.log(i)}n=o.filter((e=>Number.isInteger(e)))})(e.target.dataset.num)):alert("ЗАНЯТО!!!")}))}))})()}))})();