(()=>{"use strict";var e,t;e=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",document.addEventListener("DOMContentLoaded",(function(){document.getElementById("burger").addEventListener("click",(function(){document.querySelector(".header").classList.toggle("open")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&document.querySelector(".header").classList.remove("open")})),document.getElementById("menu").addEventListener("click",(e=>{e._isClickWithInMenu=!0})),document.getElementById("burger").addEventListener("click",(e=>{e._isClickWithInMenu=!0})),document.body.addEventListener("click",(e=>{e._isClickWithInMenu||document.querySelector(".header").classList.remove("open")})),(()=>{const e=document.querySelector("#board"),t=document.querySelectorAll("[data-party]");let n=Array.from({length:9},((e,t)=>t+1)),c=Array.from({length:9},((e,t)=>t+1)),o=!1,a="circle",l="cross";for(let t=1;t<=9;t++){const n=document.createElement("div");n.classList.add("box"),n.dataset.num=t,e.append(n)}const s=document.querySelectorAll("[data-num]");t.forEach((e=>{e.addEventListener("click",(e=>{o||(t.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),a=e.target.dataset.party)}))})),s.forEach((e=>{e.addEventListener("click",(e=>{o=!0,"box"==e.target.classList.value?(e.target.classList.add(a),n[e.target.dataset.num-1]=a,(e=>{if(c=n.filter((e=>Number.isInteger(e))),c.length>0){"cross"==a&&(l="circle");const t=parseInt(e),o=(e,t)=>t.filter((t=>e.includes(t))),s=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].filter((e=>e.find((e=>e==t)))),d=s.map((e=>e.filter((e=>n[e-1]!==a&&n[e-1]!==l)))),r=s.map((e=>e.filter((e=>n[e-1]!==a)))).filter((e=>1==e.length)).flat(),i=o(c,r),u=d.filter((e=>e.find((e=>e%2!=0)))).flat();if(i.length>0){const e=i[0],t=document.querySelector(`[data-num='${e}']`);n[e-1]=l,t.classList.add(l),console.log("сработал крит")}else if(5==n[4]){const e=document.querySelector("[data-num='5']");n[4]=l,e.classList.add(l),console.log("сработал 5")}else if(u.length>0){const e=document.querySelector(`[data-num='${u[0]}']`);n[u[0]-1]=l,e.classList.add(l),console.log("сработал нечет")}else if(c.length>0){const e=document.querySelector(`[data-num='${c[0]}']`);n[c[0]-1]=l,e.classList.add(l),console.log("свободные")}console.log(c)}else 0==c.length&&alert("ФСЁ!!")})(e.target.dataset.num)):alert("ЗАНЯТО!!!")}))}))})()}))})();